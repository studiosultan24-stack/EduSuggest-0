<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>EduSuggest - Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background: #f4f6f9; 
      padding: 20px; 
      max-width: 1200px; 
      margin: 0 auto; 
      transition: background-color 0.3s, color 0.3s;
    }
    
    h1 { 
      color: #0066cc; 
      text-align: center; 
    }
    
    .top-bar { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 20px; 
    }
    
    .theme-toggle {
      background: none;
      border: none;
      color: #0066cc;
      cursor: pointer;
      font-size: 20px;
      padding: 8px 15px;
      border-radius: 5px;
      margin-left: 10px;
    }
    
    .logout-btn { 
      background:red; 
      color:white; 
      border:none; 
      padding:8px 15px; 
      border-radius:5px; 
      cursor:pointer; 
    }
    
    .logout-btn:hover { 
      background:darkred; 
    }
    
    .search-container { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 10px; 
      margin-bottom: 20px; 
      justify-content: center; 
    }
    
    input, select, textarea { 
      padding: 10px; 
      font-size: 16px; 
      border: 1px solid #ddd; 
      border-radius: 5px; 
      font-family: Arial, sans-serif;
    }
    
    input { 
      width: 50%; 
    }
    
    textarea {
      width: 100%;
      min-height: 100px;
      resize: vertical;
    }
    
    button { 
      padding: 10px 20px; 
      font-size: 16px; 
      background: #0066cc; 
      color: white; 
      border: none; 
      border-radius: 5px; 
      cursor: pointer; 
    }
    
    button:hover { 
      background: #004d99; 
    }
    
    .container { 
      display: flex; 
      gap: 30px; 
      margin-top: 20px; 
      flex-wrap: wrap; 
    }
    
    .section { 
      flex: 1; 
      min-width: 45%; 
    }
    
    .card {
      background: white; 
      padding: 15px; 
      margin-bottom: 15px;
      border-radius: 10px; 
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    
    .card img { 
      width: 100%; 
      border-radius: 5px; 
    }
    
    a { 
      text-decoration: none; 
      color: #0066cc; 
    }
    
    a:hover { 
      text-decoration: underline; 
    }
    
    #summary { 
      background: #e8f1fb; 
      padding: 20px; 
      border-radius: 10px; 
      margin: 20px 0; 
    }
    
    .error { 
      color: red; 
    }
    
    .loader {
      display: none;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #0066cc;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      color: #666;
      font-size: 14px;
      border-top: 1px solid #ddd;
    }
    
    .developer-link {
      color: #0066cc;
      font-weight: bold;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    
    .developer-link:hover {
      text-decoration: underline;
      color: #004d99;
    }
    
    #ai-section {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }
    
    .ai-question-container {
      margin-bottom: 20px;
    }
    
    .ai-response {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      border-right: 4px solid #0066cc;
    }
    
    .dark-mode {
      background: #121212;
      color: #f1f1f1;
    }
    
    .dark-mode .card {
      background: #1e1e1e;
      color: #f1f1f1;
    }
    
    .dark-mode #summary,
    .dark-mode #ai-section {
      background: #1a3a6a;
      color: #f1f1f1;
    }
    
    .dark-mode input,
    .dark-mode select,
    .dark-mode textarea {
      background: #333;
      color: #f1f1f1;
      border-color: #444;
    }
    
    .dark-mode a {
      color: #4dabf7;
    }
    
    .dark-mode .ai-response {
      background: #2d3748;
      color: #f1f1f1;
    }
    
    .dark-mode .developer-link {
      color: #4dabf7;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div>
      <button class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
      </button>
    </div>
    <div>
      <h1>EduSuggest â€“ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ©</h1>
    </div>
    <div>
      <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
  
  <p style="text-align: center;">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ ÙˆØ§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ:</p>
  
  <div class="search-container">
    <input type="text" id="query" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ ØªØ§Ø±ÙŠØ® Ù…ØµØ±ØŒ Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ù„Ù„Ø£Ø·ÙØ§Ù„">
    <select id="level">
      <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ --</option>
      <option value="for kids">Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
      <option value="for high school">Ø§Ø¹Ø¯Ø§Ø¯ÙŠ Ùˆ Ø«Ø§Ù†ÙˆÙŠ</option>
      <option value="for university">Ø¬Ø§Ù…Ø¹Ø©</option>
    </select>
    <button onclick="searchContent()">Ø¨Ø­Ø«</button>
  </div>

  <!-- AI Section -->
  <div id="ai-section">
    <h2><i class="fas fa-brain"></i> ğŸ’¡ Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h2>
    
    <div class="ai-question-container">
      <textarea id="ai-question" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."></textarea>
      <button onclick="askAI()" style="margin-top: 10px;">Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
    </div>
    
    <div id="ai-response" class="ai-response">Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±.</div>
  </div>
  
  <!-- Wikipedia Summary -->
  <div id="summary"></div>

  <div class="container">
    <div class="section">
      <h2><i class="fab fa-youtube"></i> ğŸ¥ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙŠÙˆØªÙŠÙˆØ¨</h2>
      <div id="videos"></div>
    </div>
    <div class="section">
      <h2><i class="fas fa-book"></i> ğŸ“š ÙƒØªØ¨</h2>
      <div id="books"></div>
    </div>
  </div>
  
  <footer>
    <a href="https://www.facebook.com/Senko6666/" target="_blank" class="developer-link">
      <i class="fab fa-facebook"></i> ğŸš€ ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Hamza
    </a>
  </footer>

  <div id="loader" class="loader"></div>
  
  <script>
    // API Keys
    const YOUTUBE_API_KEY = "AIzaSyDxy5ZRbQThWF33YRXlfcGN8055soWNSv8";
    const GOOGLE_BOOKS_API = "https://www.googleapis.com/books/v1/volumes?q=";
    const HUGGINGFACE_API_KEY = "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";

    // Theme Toggle Functionality
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDarkMode);
      
      const themeIcon = document.getElementById('theme-toggle').querySelector('i');
      if (isDarkMode) {
        themeIcon.classList.replace('fa-moon', 'fa-sun');
      } else {
        themeIcon.classList.replace('fa-sun', 'fa-moon');
      }
    }

    // Initialize Theme
    function initTheme() {
      const savedTheme = localStorage.getItem('darkMode') === 'true';
      if (savedTheme) {
        document.body.classList.add('dark-mode');
        document.getElementById('theme-toggle').querySelector('i').classList.replace('fa-moon', 'fa-sun');
      }
    }

    // Logout function
    function logout() {
      localStorage.removeItem("loggedIn");
      window.location.href = "Log in.html";
    }

    // AI Question Function
    async function askAI() {
      const question = document.getElementById("ai-question").value.trim();
      const responseArea = document.getElementById("ai-response");
      
      if (!question) {
        responseArea.innerHTML = "<p class='error'>Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„ Ø£ÙˆÙ„Ø§Ù‹</p>";
        return;
      }
      
      responseArea.innerHTML = "Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©...";
      
      try {
        const aiResponse = await getAIAnswer(question);
        responseArea.innerHTML = aiResponse;
      } catch (error) {
        responseArea.innerHTML = `<p class='error'>Ø­Ø¯Ø« Ø®Ø·Ø£: ${error.message}</p>`;
      }
    }

    // AI Answer Function
    async function getAIAnswer(query) {
      try {
        // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ù…Ù† HuggingFace
        // Ù„ÙƒÙ† Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„Ø¹Ø±Ø¶ØŒ Ø³Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø±Ø¯
        
        // Ù…Ø­Ø§ÙƒØ§Ø© ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ø·Ù„Ø¨
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø±Ø¯ÙˆØ¯ Ù…Ø®ØªÙ„ÙØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„
        if (query.includes("ØªØ¹Ø±ÙŠÙ") || query.includes("Ù…Ø§ Ù‡Ùˆ") || query.includes("Ù…Ø§ Ù‡ÙŠ")) {
          return `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ "<strong>${query}</strong>"ØŒ Ù‡Ø°Ø§ Ù…Ø¬Ø§Ù„ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…. Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ Ù…Ø¬Ø§Ù„ Ù…Ù† Ù…Ø¬Ø§Ù„Ø§Øª Ø¹Ù„ÙˆÙ… Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù†Ø¸Ù…Ø© Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ Ø¹Ø§Ø¯Ø©Ù‹ Ø°ÙƒØ§Ø¡Ù‹ Ø¨Ø´Ø±ÙŠÙ‹Ø§ØŒ Ù…Ø«Ù„ Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø¨ØµØ±ÙŠ ÙˆØ§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ø§Ù… ÙˆØ§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª ÙˆØªØ±Ø¬Ù…Ø© Ø§Ù„Ù„ØºØ§Øª.`;
        } else if (query.includes("ØªØ§Ø±ÙŠØ®") || query.includes("Ù…ØªÙ‰")) {
          return `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ "<strong>${query}</strong>"ØŒ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ù† Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ§Ø±ÙŠØ®ÙŠØ©. ØªØ§Ø±ÙŠØ® Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ« ÙŠØ¹ÙˆØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ù…Ø³ÙŠÙ†ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù‚Ø±Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠØŒ Ø¹Ù†Ø¯Ù…Ø§ Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø§Ø­Ø«ÙˆÙ† ÙÙŠ Ø§Ø³ØªÙƒØ´Ø§Ù ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¢Ù„Ø§Øª Ø£Ù† ØªØ­Ø§ÙƒÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠ. Ø´Ù‡Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù„ ØªÙ‚Ø¯Ù…Ù‹Ø§ ÙƒØ¨ÙŠØ±Ù‹Ø§ ÙÙŠ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø£Ø®ÙŠØ±Ø© Ù…Ø¹ ØªØ·ÙˆØ± ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ.`;
        } else if (query.includes("ÙƒÙŠÙ") || query.includes("Ø·Ø±ÙŠÙ‚Ø©")) {
          return `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ "<strong>${query}</strong>"ØŒ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ØªØªØ¶Ù…Ù† Ø¹Ø¯Ø© Ø®Ø·ÙˆØ§Øª. ØªØ¹Ù…Ù„ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ù„ÙŠÙ„ ÙƒÙ…ÙŠØ§Øª Ù‡Ø§Ø¦Ù„Ø© Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙˆØ§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª. ØªØ³ØªØ®Ø¯Ù… Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¦Ù‡Ø§ Ù…Ø¹ Ù…Ø±ÙˆØ± Ø§Ù„ÙˆÙ‚Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© ÙˆØ§Ù„Ø®Ø·Ø£ØŒ Ù…Ù…Ø§ ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ù…Ù† Ø£Ø¯Ø§Ø¡ Ù…Ù‡Ø§Ù… Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ø¯Ù‚Ø© Ù…ØªØ²Ø§ÙŠØ¯Ø©.`;
        } else {
          return `Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ "<strong>${query}</strong>". Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ Ù…Ø¬Ø§Ù„ Ù…ØªØ·ÙˆØ± Ø¨Ø³Ø±Ø¹Ø© ÙŠÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù†Ø¸Ù…Ø© ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ Ø°ÙƒØ§Ø¡Ù‹ Ø¨Ø´Ø±ÙŠÙ‹Ø§. Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙˆØ§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙˆØ£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ ØªØ¨Ø¯Ùˆ Ø¨Ø´Ø±ÙŠØ©. Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆØªØ´Ù…Ù„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø°Ø§ØªÙŠØ© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠÙŠÙ†ØŒ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªÙˆØµÙŠØ©ØŒ ÙˆØ§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ.`;
        }
      } catch (error) {
        throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ');
      }
    }

    // Wikipedia Summary API
    async function getWikipediaSummary(query) {
      const url = `https://ar.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`;
      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§');
        const data = await response.json();
        const summaryDiv = document.getElementById("summary");

        if (data.type === "disambiguation" || !data.extract) {
          summaryDiv.innerHTML = `<p class='error'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§. Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø© Ø¨Ø­Ø«ÙŠØ© Ø£Ø¨Ø³Ø·.</p>`;
        } else {
          summaryDiv.innerHTML = `
            <h2><i class="fab fa-wikipedia-w"></i> Ù…Ù„Ø®Øµ ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§: ${data.title}</h2>
            <p>${data.extract}</p>
            ${data.thumbnail ? `<img src="${data.thumbnail.source}" width="200" style="float:left; margin-left:15px;">` : ''}
            <a href="${data.content_urls.desktop.page}" target="_blank">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ ÙƒØ§Ù…Ù„Ø§Ù‹</a>
          `;
        }
      } catch (error) {
        document.getElementById("summary").innerHTML = `<p class='error'>ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ø®Øµ ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§: ${error.message}</p>`;
      }
    }

    // YouTube API
    async function getYouTubeVideos(query) {
      const maxResults = 10; 
      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=${maxResults}&q=${encodeURIComponent(query)}&key=${YOUTUBE_API_KEY}`;
      
      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª');
        const data = await response.json();
        const container = document.getElementById("videos");
        container.innerHTML = "";

        if (data.items && data.items.length > 0) {
          data.items.forEach(item => {
            const videoId = item.id.videoId;
            const title = item.snippet.title;
            const channel = item.snippet.channelTitle;
            const thumb = item.snippet.thumbnails.medium.url;
            const publishedAt = new Date(item.snippet.publishedAt).toLocaleDateString();

            container.innerHTML += `
              <div class="card">
                <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">
                  <img src="${thumb}" alt="${title}">
                  <h3>${title}</h3>
                </a>
                <p><b>Ø§Ù„Ù‚Ù†Ø§Ø©:</b> ${channel}</p>
                <p><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±:</b> ${publishedAt}</p>
              </div>
            `;
          });
        } else {
          container.innerHTML = `<p class='error'>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„Ù€ "${query}".</p>`;
        }
      } catch (error) {
        document.getElementById("videos").innerHTML = `<p class='error'>ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª: ${error.message}</p>`;
      }
    }

    // Google Books API
    async function getBooks(query) {
      const url = `${GOOGLE_BOOKS_API}${encodeURIComponent(query)}&maxResults=10`; 
      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙƒØªØ¨');
        const data = await response.json();
        const container = document.getElementById("books");
        container.innerHTML = "";

        if (data.items && data.items.length > 0) {
          data.items.forEach(book => {
            const title = book.volumeInfo.title;
            const authors = book.volumeInfo.authors ? book.volumeInfo.authors.join(", ") : "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
            const preview = book.volumeInfo.previewLink;
            const thumbnail = book.volumeInfo.imageLinks?.thumbnail || "https://via.placeholder.com/128x196?text=No+Cover";

            container.innerHTML += `
              <div class="card">
                <a href="${preview}" target="_blank">
                  <img src="${thumbnail}" alt="${title}">
                  <h3>${title}</h3>
                </a>
                <p><b>Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ†:</b> ${authors}</p>
              </div>
            `;
          });
        } else {
          container.innerHTML = `<p class='error'>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ Ù„Ù€ "${query}".</p>`;
        }
      } catch (error) {
        document.getElementById("books").innerHTML = `<p class='error'>ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ¨: ${error.message}</p>`;
      }
    }

    // Search Handler
    function searchContent() {
      const queryBase = document.getElementById("query").value.trim();
      const level = document.getElementById("level").value;
      if (queryBase === "") {
        alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø¨Ø­Ø«!");
        return;
      }

      const query = `${queryBase} ${level}`.trim();

      // Show loader
      document.getElementById("loader").style.display = "block";

      // Clear previous results
      document.getElementById("summary").innerHTML = "";
      document.getElementById("videos").innerHTML = "";
      document.getElementById("books").innerHTML = "";

      // Get all content
      Promise.all([
        getWikipediaSummary(queryBase),
        getYouTubeVideos(query),
        getBooks(query)
      ]).finally(() => {
        document.getElementById("loader").style.display = "none";
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initTheme();
      document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

      // Check if user is logged in
      if(localStorage.getItem("loggedIn") !== "true") {
        alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹!");
        window.location.href = "Log in.html";
      }
    });

    // Handle Enter key press in search
    document.getElementById("query").addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        searchContent();
      }
    });

    // Handle Enter key press in AI question (Ctrl+Enter for new line)
    document.getElementById("ai-question").addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.ctrlKey) {
        e.preventDefault();
        askAI();
      }
    });
  </script>
</body>
</html>